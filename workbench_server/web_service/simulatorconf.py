from uuid import uuid4

from datetime import datetime

from dateutil.parser import parse

class SimulatorConfig(object):
	usbs = {
		"C412F52D6CA0C111B00288EF": {"vendor": "TOSHIBA", "product": "TransMemory"},
		"078A161D007A": {"vendor": "TDK_LoR", "product": "Trans-It_Drive"}
	}

	inventories = {
		"138ba77e263d49909ea51341df77a251": [
			{"created":"2017-07-21T09:55:03.523005","_uuid":"138ba77e263d49909ea51341df77a251","version":"9.0","components":[{"model":"Mobile 945GSE Express Integrated Graphics Controller","memory":256.0,"@type":"GraphicCard","manufacturer":"Intel Corporation"},{"model":"Mobile 945GM\/GMS\/GME, 943\/940GML Express Integrated Graphics Controller","@type":"GraphicCard","manufacturer":"Intel Corporation"},{"logical_name":"\/dev\/sda","serialNumber":"5SV1W0WF","test":{"status":"Completed without error","firstError":None,"error":False,"lifetime":2128,"type":"Short offline","@type":"TestHardDrive"},"interface":"ata","model":"ST9160310AS","manufacturer":"Seagate","@type":"HardDrive","size":152627.8359375},{"interface":"SDRAM","manufacturer":"Manufacturer0","@type":"RamModule","size":2048},{"totalSlots":1,"serialNumber":"EeePC-0123456789","connectors":{"firewire":0,"serial":0,"pcmcia":0,"usb":5},"model":"1000H","usedSlots":1,"@type":"Motherboard","manufacturer":"ASUSTeK Computer INC."},{"model":"AR8121\/AR8113\/AR8114 Gigabit or Fast Ethernet","serialNumber":"00:23:54:8d:be:66","speed":100,"@type":"NetworkAdapter","manufacturer":"Qualcomm Atheros"},{"model":"RT2790 Wireless 802.11n 1T\/2R PCIe","serialNumber":"00:15:af:dc:44:eb","@type":"NetworkAdapter","manufacturer":"Ralink corp."},{"benchmark":{"score":6383.92,"@type":"BenchmarkProcessor"},"numberOfCores":1,"model":"Intel(R) Atom(TM) CPU N270 @ 1.60GHz","speed":1.6,"@type":"Processor","manufacturer":"Intel Corp."},{"model":"NM10\/ICH7 Family High Definition Audio Controller","@type":"SoundCard","manufacturer":"Intel Corporation"}],"device":{"serialNumber":"8BOAAQ191999","_uuid":"403d1e3aeef34d819e3f1ce7496dfe0e","model":"1000H","type":"Desktop","@type":"Computer","manufacturer":"ASUSTeK Computer INC."},"@type":"Snapshot"},
			{"created":"2017-07-21T09:55:21.457514","_uuid":"138ba77e263d49909ea51341df77a251","version":"9.0","components":[{"model":"Mobile 945GSE Express Integrated Graphics Controller","memory":256.0,"@type":"GraphicCard","manufacturer":"Intel Corporation"},{"model":"Mobile 945GM\/GMS\/GME, 943\/940GML Express Integrated Graphics Controller","@type":"GraphicCard","manufacturer":"Intel Corporation"},{"serialNumber":"5SV1W0WF","benchmark":{"readingSpeed":68.4,"@type":"BenchmarkHardDrive","writingSpeed":19.7},"test":{"status":"Completed without error","firstError":None,"error":False,"lifetime":2128,"type":"Short offline","@type":"TestHardDrive"},"interface":"ata","model":"ST9160310AS","manufacturer":"Seagate","@type":"HardDrive","size":152627.8359375},{"interface":"SDRAM","manufacturer":"Manufacturer0","@type":"RamModule","size":2048},{"totalSlots":1,"serialNumber":"EeePC-0123456789","connectors":{"firewire":0,"serial":0,"pcmcia":0,"usb":5},"model":"1000H","usedSlots":1,"@type":"Motherboard","manufacturer":"ASUSTeK Computer INC."},{"model":"AR8121\/AR8113\/AR8114 Gigabit or Fast Ethernet","serialNumber":"00:23:54:8d:be:66","speed":100,"@type":"NetworkAdapter","manufacturer":"Qualcomm Atheros"},{"model":"RT2790 Wireless 802.11n 1T\/2R PCIe","serialNumber":"00:15:af:dc:44:eb","@type":"NetworkAdapter","manufacturer":"Ralink corp."},{"benchmark":{"score":6383.92,"@type":"BenchmarkProcessor"},"numberOfCores":1,"model":"Intel(R) Atom(TM) CPU N270 @ 1.60GHz","speed":1.6,"@type":"Processor","manufacturer":"Intel Corp."},{"model":"NM10\/ICH7 Family High Definition Audio Controller","@type":"SoundCard","manufacturer":"Intel Corporation"}],"device":{"serialNumber":"8BOAAQ191999","_uuid":"403d1e3aeef34d819e3f1ce7496dfe0e","model":"1000H","type":"Desktop","@type":"Computer","manufacturer":"ASUSTeK Computer INC."},"_id":"5","@type":"Snapshot","condition":{"appearance":{"general":"C"},"functionality":{"general":"C"}}},
			{"created":"2017-07-21T09:55:21.706324","_uuid":"138ba77e263d49909ea51341df77a251","signed_data":None,"localpath":"\/tmp\/asustek-computer-inc,1000h,8boaaq191999.json","filename":"asustek-computer-inc,1000h,8boaaq191999.json","device":{"_uuid":"403d1e3aeef34d819e3f1ce7496dfe0e"}},
			{"device":{"_uuid":"403d1e3aeef34d819e3f1ce7496dfe0e"},"copy_to_usb":False,"_uuid":"138ba77e263d49909ea51341df77a251","inventory":"\/media\/ereuse-data\/inventory","created":"2017-07-21T09:55:21.752251"},
			{"device":{"_uuid":"403d1e3aeef34d819e3f1ce7496dfe0e"},"stress_test_ok":True,"_uuid":"138ba77e263d49909ea51341df77a251","stress_test_mins":1,"created":"2017-07-21T09:56:21.974597"},
			{"device":{"_uuid":"403d1e3aeef34d819e3f1ce7496dfe0e"},"_uuid":"138ba77e263d49909ea51341df77a251","install_image_ok":True,"image_name":"linux-mint-1801-ca","created":"2017-07-21T10:06:29.977470"}
		],
		"64d9641210444ca380918b926cd52242": [
			{"created":"2017-08-08T16:29:29.791242","_uuid":"64d9641210444ca380918b926cd52242","version":"9.0","components":[{"model":"VirtualBox Graphics Adapter","memory":16.0,"@type":"GraphicCard","manufacturer":"InnoTek Systemberatung GmbH"},{"logical_name":"\/dev\/sda","serialNumber":"VB3b4c90e0-f9118116","test":{"status":"SMART cannot be enabled on this device.","@type":"TestHardDrive","error":True},"interface":"ata","model":"VBOX HARDDISK","@type":"HardDrive","size":1028.75},{"totalSlots":0,"serialNumber":"0","connectors":{"firewire":0,"serial":0,"pcmcia":0,"usb":0},"model":"VirtualBox","usedSlots":0,"@type":"Motherboard","manufacturer":"Oracle Corporation"},{"model":"82540EM Gigabit Ethernet Controller","serialNumber":"08:00:27:44:83:e6","speed":1000,"@type":"NetworkAdapter","manufacturer":"Intel Corporation"},{"description":"DVD reader","@type":"OpticalDrive"},{"model":"Intel(R) Core(TM)2 Duo CPU P8600 @ 2.40GHz","manufacturer":"Intel Corp.","benchmark":{"score":4776.0,"@type":"BenchmarkProcessor"},"@type":"Processor","numberOfCores":1},{"model":"82801AA AC'97 Audio Controller","@type":"SoundCard","manufacturer":"Intel Corporation"}],"device":{"serialNumber":"0","_uuid":"c1fa86033b9a43ba844b832099af4edd","model":"VirtualBox","type":"Desktop","@type":"Computer","manufacturer":"innotek GmbH"},"@type":"Snapshot"},
			{"created":"2017-08-08T16:29:33.436009","_uuid":"64d9641210444ca380918b926cd52242","version":"9.0","components":[{"model":"VirtualBox Graphics Adapter","memory":16.0,"@type":"GraphicCard","manufacturer":"InnoTek Systemberatung GmbH"},{"serialNumber":"VB3b4c90e0-f9118116","benchmark":{"readingSpeed":220.0,"@type":"BenchmarkHardDrive","writingSpeed":128.0},"test":{"status":"SMART cannot be enabled on this device.","@type":"TestHardDrive","error":True},"interface":"ata","model":"VBOX HARDDISK","@type":"HardDrive","size":1028.75},{"totalSlots":0,"serialNumber":"0","connectors":{"firewire":0,"serial":0,"pcmcia":0,"usb":0},"model":"VirtualBox","usedSlots":0,"@type":"Motherboard","manufacturer":"Oracle Corporation"},{"model":"82540EM Gigabit Ethernet Controller","serialNumber":"08:00:27:44:83:e6","speed":1000,"@type":"NetworkAdapter","manufacturer":"Intel Corporation"},{"description":"DVD reader","@type":"OpticalDrive"},{"model":"Intel(R) Core(TM)2 Duo CPU P8600 @ 2.40GHz","manufacturer":"Intel Corp.","benchmark":{"score":4776.0,"@type":"BenchmarkProcessor"},"@type":"Processor","numberOfCores":1},{"model":"82801AA AC'97 Audio Controller","@type":"SoundCard","manufacturer":"Intel Corporation"}],"device":{"serialNumber":"0","_uuid":"c1fa86033b9a43ba844b832099af4edd","model":"VirtualBox","type":"Desktop","@type":"Computer","manufacturer":"innotek GmbH"},"@type":"Snapshot"},
			{"created":"2017-08-08T16:29:33.522719","_uuid":"64d9641210444ca380918b926cd52242","signed_data":None,"localpath":"\/tmp\/innotek-gmbh,virtualbox,0.json","filename":"innotek-gmbh,virtualbox,0.json","device":{"_uuid":"c1fa86033b9a43ba844b832099af4edd"}},
			{"device":{"_uuid":"c1fa86033b9a43ba844b832099af4edd"},"copy_to_usb":False,"_uuid":"64d9641210444ca380918b926cd52242","inventory":"\/media\/ereuse-data\/inventory","created":"2017-08-08T16:29:33.610574"},
			{"device":{"_uuid":"c1fa86033b9a43ba844b832099af4edd"},"_uuid":"64d9641210444ca380918b926cd52242","stress_test_mins":0,"created":"2017-08-08T16:29:33.639816"},
			{"device":{"_uuid":"c1fa86033b9a43ba844b832099af4edd"},"_uuid":"64d9641210444ca380918b926cd52242","created":"2017-08-08T16:29:33.681366"}
		],
		"34433cb394bd424e9f968fcf86a19415": [
			{"created":"2017-06-06T17:05:48.692356","_uuid":"34433cb394bd424e9f968fcf86a19415","version":"9.0","components":[{"model":"ION VGA","memory":256.0,"@type":"GraphicCard","manufacturer":"NVIDIA Corporation"},{"logical_name":"\/dev\/sda","serialNumber":"6VD0NSP6","test":{"status":"Completed without error","firstError":None,"error":False,"lifetime":596,"type":"Short offline","@type":"TestHardDrive"},"interface":"ata","model":"ST9320325AS","manufacturer":"Seagate","@type":"HardDrive","size":305245.3359375},{"interface":"SDRAM","serialNumber":"SerNum01","@type":"RamModule","manufacturer":"Manufacturer01","size":1024},{"interface":"SDRAM","serialNumber":"SerNum00","@type":"RamModule","manufacturer":"Manufacturer00","size":1024},{"totalSlots":2,"serialNumber":"102552760003533","connectors":{"firewire":0,"serial":0,"pcmcia":0,"usb":2},"model":"AMCP7AION-HT","usedSlots":2,"@type":"Motherboard","manufacturer":"ASRock"},{"model":"MCP79 Ethernet","serialNumber":"90:e6:ba:f2:7e:db","speed":1000,"@type":"NetworkAdapter","manufacturer":"NVIDIA Corporation"},{"model":"DVD-RAM UJ862AS","manufacturer":"MATSHITA","@type":"OpticalDrive","description":"DVD-RAM writer"},{"benchmark":{"score":12799.6,"@type":"BenchmarkProcessor"},"numberOfCores":2,"address":64,"model":"Intel(R) Atom(TM) CPU 330 @ 1.60GHz","speed":1.6,"@type":"Processor","manufacturer":"Intel Corp."},{"benchmark":{"score":12799.6,"@type":"BenchmarkProcessor"},"address":64,"speed":1.6,"@type":"Processor","numberOfCores":2},{"model":"MCP79 High Definition Audio","@type":"SoundCard","manufacturer":"NVIDIA Corporation"}],"device":{"serialNumber":"To Be Filled By O.E.M.","_uuid":"68864983a7624a07b6b2428346124087","model":"To Be Filled By O.E.M.","type":"Desktop","@type":"Computer","manufacturer":"To Be Filled By O.E.M."},"@type":"Snapshot"},
			{"created":"2017-06-06T17:06:19.135006","_uuid":"34433cb394bd424e9f968fcf86a19415","version":"9.0","components":[{"model":"ION VGA","memory":256.0,"@type":"GraphicCard","manufacturer":"NVIDIA Corporation"},{"serialNumber":"6VD0NSP6","benchmark":{"readingSpeed":67.8,"@type":"BenchmarkHardDrive","writingSpeed":10.2},"test":{"status":"Completed without error","firstError":None,"error":False,"lifetime":596,"type":"Short offline","@type":"TestHardDrive"},"interface":"ata","model":"ST9320325AS","manufacturer":"Seagate","@type":"HardDrive","size":305245.3359375},{"interface":"SDRAM","serialNumber":"SerNum01","@type":"RamModule","manufacturer":"Manufacturer01","size":1024},{"interface":"SDRAM","serialNumber":"SerNum00","@type":"RamModule","manufacturer":"Manufacturer00","size":1024},{"totalSlots":2,"serialNumber":"102552760003533","connectors":{"firewire":0,"serial":0,"pcmcia":0,"usb":2},"model":"AMCP7AION-HT","usedSlots":2,"@type":"Motherboard","manufacturer":"ASRock"},{"model":"MCP79 Ethernet","serialNumber":"90:e6:ba:f2:7e:db","speed":1000,"@type":"NetworkAdapter","manufacturer":"NVIDIA Corporation"},{"model":"DVD-RAM UJ862AS","manufacturer":"MATSHITA","@type":"OpticalDrive","description":"DVD-RAM writer"},{"benchmark":{"score":12799.6,"@type":"BenchmarkProcessor"},"numberOfCores":2,"address":64,"model":"Intel(R) Atom(TM) CPU 330 @ 1.60GHz","speed":1.6,"@type":"Processor","manufacturer":"Intel Corp."},{"benchmark":{"score":12799.6,"@type":"BenchmarkProcessor"},"address":64,"speed":1.6,"@type":"Processor","numberOfCores":2},{"model":"MCP79 High Definition Audio","@type":"SoundCard","manufacturer":"NVIDIA Corporation"}],"device":{"serialNumber":"To Be Filled By O.E.M.","_uuid":"68864983a7624a07b6b2428346124087","model":"To Be Filled By O.E.M.","type":"Desktop","@type":"Computer","manufacturer":"To Be Filled By O.E.M."},"@type":"Snapshot"},
			{"created":"2017-06-06T17:06:19.199333","_uuid":"34433cb394bd424e9f968fcf86a19415","signed_data":None,"localpath":"\/tmp\/to-be-filled-by-o-e-m,to-be-filled-by-o-e-m,to-be-filled-by-o-e-m.json","filename":"to-be-filled-by-o-e-m,to-be-filled-by-o-e-m,to-be-filled-by-o-e-m.json","device":{"_uuid":"68864983a7624a07b6b2428346124087"}},
			{"device":{"_uuid":"68864983a7624a07b6b2428346124087"},"copy_to_usb":False,"_uuid":"34433cb394bd424e9f968fcf86a19415","inventory":"\/media\/ereuse-data\/inventory","created":"2017-06-06T17:06:19.289406"},
			{"device":{"_uuid":"68864983a7624a07b6b2428346124087"},"_uuid":"34433cb394bd424e9f968fcf86a19415","stress_test_mins":0,"created":"2017-06-06T17:06:19.323572"},
			{"device":{"_uuid":"68864983a7624a07b6b2428346124087"},"_uuid":"34433cb394bd424e9f968fcf86a19415","created":"2017-06-06T17:06:19.362996"}
		],
	}

	def __init__(self):
		new_inventories = {}
		today = datetime.now()
		for inv_uuid, phases in self.inventories.items():
			new_uuid = str(uuid4())
			new_phases = []
			for phase in phases:
				phase["_uuid"] = new_uuid

				# perhaps will be better to set the date when pushed to the queue
				created = parse(phase["created"])
				new_created = created.replace(year = today.year, month = today.month, day = today.day)
				phase["created"] = new_created.isoformat()

				new_phases.append(phase)
			new_inventories[new_uuid] = new_phases

		self.inventories = new_inventories

	def to_dict(self):
		return {"usbs": self.usbs, "inventories": self.inventories}
