{%- macro error_panel(form) -%}
	<div class="alert alert-danger">
    <dl class="dl-horizontal">
      {%- for field, errors in form.errors.items() -%}
        <dt>{{ form[field].label.text }}</dt>
        <dd>
          <ul>
            {%- for error in errors -%}
              <li>{{ error }}</li>
            {%- endfor -%}
          </ul>
        </dd>
      {%- endfor -%}
    </dl>
  </div>
{%- endmacro -%}

{%- macro render_field(field) -%}
	{%- if field.type in ["SwitcherField", "OnOffField", "QRField"] -%}
    {{ field() }}
  {%- elif field.type == "RadioField" -%}
    <div class="form-group{% if field.errors %} has-error{% endif %}{% if field.render_kw and 'group' in field.render_kw %} {{ field.render_kw['group'] }}{% endif %}">
      {{ field.label(class_ = "control-label") }}
      {%- for subfield in field -%} 
        <div class="checkbox">
          <label>
            {{ subfield() }} {{ subfield.label }}
          </label>
        </div>
      {%- endfor -%}

      {%- if field.errors -%}
      	{{ field_error(field) }}
      {%- endif -%}
    </div>
  {%- else -%}
    <div class="form-group{% if field.errors %} has-error{% endif %}{% if field.render_kw and 'group' in field.render_kw %} {{ field.render_kw['group'] }}{% endif %}">
      {{ field.label(class_ = "control-label") }}
      {{ field(class_ = "form-control") }}

      {%- if field.errors -%}
      	{{ field_error(field) }}
      {%- endif -%}
    </div>
  {%- endif -%}
{%- endmacro -%}

{%- macro field_error(field) -%}
	<div class="help-block">
    <ul>
      {%- for error in field.errors -%}
        <li>{{ error }}</li>
      {%- endfor -%}
    </ul>
  </div>
{%- endmacro -%}
